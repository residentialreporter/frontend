{"version":3,"sources":["webpack:///src/app/pages/login/login.module.ts","webpack:///src/app/pages/login/login-page.component.html","webpack:///src/app/components/login/login.component.html","webpack:///src/app/components/login/login.component.ts","webpack:///src/app/components/login/login.component.scss","webpack:///src/app/pages/login/login-routing.module.ts","webpack:///src/app/pages/login/login-page.component.ts"],"names":["LoginPageModule","imports","declarations","LoginComponent","fb","route","router","userService","form","username","password","returnUrl","snapshot","queryParams","group","required","checkAuthenticated","navigate","loginInvalid","formSubmitAttempt","valid","get","value","login","selector","template","routes","path","component","LoginPageRoutingModule","forChild","exports","LoginPageComponent"],"mappings":"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","file":"residentialreporter-pages-login-login-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { LoginPageComponent } from './login-page.component';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatFormFieldModule } from '@angular/material/form-field';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\nimport { LoginComponent } from '@residentialreporter/components/login/login.component';\nimport { MatInputModule } from '@angular/material/input';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        MatButtonModule,\n        MatCardModule,\n        MatFormFieldModule,\n        MatInputModule,\n        ReactiveFormsModule,\n        LoginPageRoutingModule,\n        TranslateModule\n    ],\n    declarations: [LoginPageComponent, LoginComponent]\n})\nexport class LoginPageModule {\n}\n","export default \"<app-login></app-login>\\n\\n\";","export default \"<mat-card>\\n    <mat-card-content>\\n        <form (ngSubmit)=\\\"onSubmit()\\\" [formGroup]=\\\"form\\\">\\n            <h2>{{ 'Log in' | translate }}</h2>\\n            <div *ngIf=\\\"loginInvalid\\\">\\n                {{ 'The username and password were not recognised' | translate }}\\n            </div>\\n            <mat-form-field class=\\\"full-width-input\\\">\\n                <input formControlName=\\\"username\\\"\\n                       matInput\\n                       placeholder=\\\"{{ 'Username' | translate }}\\\"\\n                       autocomplete=\\\"current-username\\\"\\n                       required>\\n                <mat-error>\\n                    {{ 'Please provide a valid username' | translate }}\\n                </mat-error>\\n            </mat-form-field>\\n            <mat-form-field class=\\\"full-width-input\\\">\\n                <input formControlName=\\\"password\\\"\\n                       matInput\\n                       placeholder=\\\"{{ 'Password' | translate }}\\\"\\n                       autocomplete=\\\"current-password\\\"\\n                       required\\n                       type=\\\"password\\\">\\n                <mat-error>\\n                    {{ 'Please provide a valid password' | translate }}\\n                </mat-error>\\n            </mat-form-field>\\n\\n            <button color=\\\"primary\\\" mat-raised-button>{{ 'Log in' | translate }}</button>\\n\\n            <hr>\\n\\n            <button color=\\\"secondary\\\" routerLink=\\\"/password-reset\\\" mat-raised-button>{{'Reset password' | translate}}</button>\\n        </form>\\n    </mat-card-content>\\n</mat-card>\\n\";","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { UserService } from '../../services/user/user.service';\n\n@Component({\n    selector: 'app-login',\n    templateUrl: './login.component.html',\n    styleUrls: ['./login.component.scss']\n})\n\nexport class LoginComponent implements OnInit {\n    form: FormGroup = new FormGroup({\n        username: new FormControl(),\n        password: new FormControl()\n    });\n    public loginInvalid: boolean;\n    private formSubmitAttempt: boolean;\n    private returnUrl: string;\n\n    constructor(\n        private fb: FormBuilder,\n        private route: ActivatedRoute,\n        private router: Router,\n        private userService: UserService\n    ) {\n    }\n\n    async ngOnInit() {\n        this.returnUrl = this.route.snapshot.queryParams.returnUrl || '/home';\n        this.form = this.fb.group({\n            username: ['', Validators.required],\n            password: ['', Validators.required]\n        });\n\n        if (await this.userService.checkAuthenticated()) {\n            await this.router.navigate([this.returnUrl]);\n        }\n    }\n\n    async onSubmit() {\n        this.loginInvalid = false;\n        this.formSubmitAttempt = false;\n        if (this.form.valid) {\n            try {\n                const username = this.form.get('username').value;\n                const password = this.form.get('password').value;\n                await this.userService.login(username, password);\n            } catch (err) {\n                this.loginInvalid = true;\n            }\n        } else {\n            this.formSubmitAttempt = true;\n        }\n    }\n}\n\n","export default \"mat-card {\\n  max-width: 400px;\\n  margin: 2em auto;\\n  text-align: center;\\n}\\n\\nmat-form-field {\\n  display: block;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtBQUNGOztBQUVBO0VBQ0UsY0FBQTtBQUNGIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIm1hdC1jYXJkIHtcbiAgbWF4LXdpZHRoOiA0MDBweDtcbiAgbWFyZ2luOiAyZW0gYXV0bztcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5tYXQtZm9ybS1maWVsZCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4iXX0= */\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LoginPageComponent } from './login-page.component';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: LoginPageComponent,\n    }\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n})\nexport class LoginPageRoutingModule {\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'app-login-page',\n    templateUrl: 'login-page.component.html',\n})\nexport class LoginPageComponent {\n\n    constructor() {\n    }\n}\n"]}